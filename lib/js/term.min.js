"use strict";window.tsfTerm=function(){function a(){const a=document.getElementById("autodescription-meta[noindex]"),b=document.getElementById("autodescription-meta[canonical]"),c=new Map,d=2;let e=0;tsfCanonical.setInputElement(b);const f=JSON.parse(document.getElementById(`tsf-canonical-data_${j}`)?.dataset.state||0);f&&(tsfCanonical.updateStateOf(j,"allowReferenceChange",!f.refCanonicalLocked),tsfCanonical.updateStateOf(j,"preferredScheme",f.preferredScheme.trim()),tsfCanonical.updateStateOf(j,"urlStructure",f.urlStructure)),tsfCanonical.enqueueTriggerUnregisteredInput(j);const h=()=>{tsfCanonical.updateStateOf(j,"showUrlPlaceholder",!(e&d)),tsfCanonical.updateStateOf(j,"urlDataParts",Object.fromEntries(c.entries()))};if(b&&tsfCanonical.structIncludes(j,`%${g}%`)){const a=document.getElementById("slug"),b=document.getElementById("name");let d=f.parentTermSlugs.map(a=>a.slug);const e=tsfUtils.debounce(()=>{const e=a?.value||b?.value||"",f=tsfCanonical.sanitizeSlug(e.substring(0,200));c.set(`%${g}%`,[...d,f].join("/")),h()},1e3/60);if(a?.addEventListener("input",e),b?.addEventListener("input",e),f.isHierarchical){tsfTermSlugs.store(f.parentTermSlugs,g);document.getElementById("parent")?.addEventListener("change",async a=>{d=await tsfTermSlugs.get(a.target.value,g),e()})}e()}const i=b=>{let c="";switch(+b){case 0:c=a.dataset.defaultUnprotected;break;case-1:c="index";break;case 1:c="noindex"}"noindex"===c?e|=d:e&=~d,h()};a&&(a.addEventListener("change",a=>i(a.target.value)),i(a.value))}function b(){const a=document.getElementById(h);if(!a)return;tsfTitle.setInputElement(a);const b=JSON.parse(document.getElementById(`tsf-title-data_${h}`)?.dataset.state||0);b&&(tsfTitle.updateStateOf(h,"allowReferenceChange",!b.refTitleLocked),tsfTitle.updateStateOf(h,"defaultTitle",b.defaultTitle.trim()),tsfTitle.updateStateOf(h,"addAdditions",b.addAdditions),tsfTitle.updateStateOf(h,"useSocialTagline",!!(b.useSocialTagline||!1)),tsfTitle.updateStateOf(h,"additionValue",b.additionValue.trim()),tsfTitle.updateStateOf(h,"additionPlacement",b.additionPlacement));const c=tsf.escapeString(f.params.termPrefix),d=document.getElementById("autodescription-meta[title_no_blog_name]");d&&(d.addEventListener("change",a=>{let b=!a.target.checked;f.params.additionsForcedDisabled&&(b=!1),tsfTitle.updateStateOf(h,"addAdditions",b)}),d.dispatchEvent(new Event("change")));const e=a=>{a=a?.trim();let b=tsfTitle.stripTitleTags?tsf.stripTags(a):a;b||=tsfTitle.untitledTitle;let d;d=window.isRtl?`${b} ${c}`:`${c} ${b}`,tsfTitle.updateStateOf(h,"defaultTitle",d)};document.querySelector("#edittag #name")?.addEventListener("input",a=>e(a.target.value)),tsfTitle.enqueueUnregisteredInputTrigger(h)}function c(){const a=document.getElementById(i);if(a){tsfDescription.setInputElement(a);const b=JSON.parse(document.getElementById(`tsf-description-data_${i}`)?.dataset.state||0);b&&tsfDescription.updateStateOf(i,"defaultDescription",b.defaultDescription.trim()),tsfDescription.enqueueUnregisteredInputTrigger(i)}}function d(){tsfSocial.setInputInstance(k,h,i);const a=JSON.parse(document.getElementById(`tsf-social-data_${k}`)?.dataset.settings||0);a&&(tsfSocial.updateStateOf(k,"addAdditions",a.og.state.addAdditions),tsfSocial.updateStateOf(k,"defaults",{ogTitle:a.og.state.defaultTitle,twTitle:a.tw.state.defaultTitle,ogDesc:a.og.state.defaultDesc,twDesc:a.tw.state.defaultDesc}))}function e(){a(),b(),c(),d()}const f=tsfTermL10n,g=tsf.escapeString(f.params.taxonomy),h="autodescription-meta[doctitle]",i="autodescription-meta[description]",j="autodescription-meta[canonical]",k="autodescription_social_tt";return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",e)}},{l10n:f,taxonomy:g})}(),window.tsfTerm.load();
